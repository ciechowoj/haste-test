#pragma once
#include <haste/primitive>

namespace haste {

class allocator {
 public:
  allocator();
  allocator(const allocator&);
  allocator(allocator&&);
  ~allocator();

  allocator& operator=(const allocator&);
  allocator& operator=(allocator&&);

  void* alloc(usize size);
  void* realloc(usize size, void* memory);
  void free(void* memory);

  usize capacity() const;
  usize usage() const;

 private:
  struct _impl_t;
  static _impl_t _def;
  _impl_t* _impl;

  allocator(_impl_t* impl);
  friend allocator default_allocator();
};
}
